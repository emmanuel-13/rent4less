{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--=============== FAVICON ===============-->
    <link
      rel="shortcut icon"
      href="{% static 'asset_detail/img/favicon.png' %}"
      type="image/x-icon"
    />
    <!--=============== BOXICONS ===============-->
    <link
      href="https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css"
      rel="stylesheet"
    />

    <!--=============== CSS ===============-->
    <link rel="stylesheet" href="{% static 'asset_detail/css/style.css' %}" />
    
    <!--=============== Jquery CSS ===============-->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">

    <title>Rent4Less</title>
  </head>
  <body>
    <!--==================== NAVBAR ====================-->
    <div class="navbar" id="navbar">
      <nav class="nav container">
        <a href="{% url 'city' %}" class="nav__logo">
          <img
            src="{% static 'asset_detail/img/rent4less-logo-small.png' %}"
            alt="rent4less-logo-small"
          />
        </a>

        <div class="nav__menu">
          <ul class="nav__list">
            <li class="nav__item">
              <a href="{% url 'home' %}" class="nav__link">
                <i class="bx bx-home-alt-2"></i>
                <span>Home</span>
              </a>
            </li>

            <li class="nav__item">
              <a href="{% url 'about' %}" class="nav__link">
                <i class="bx bx-building-house"></i>
                <span>About</span>
              </a>
            </li>

            <!-- Theme Change Button -->
            <i class="bx bx-moon change-theme" id="theme-button"></i>


            <li class="nav__item">
              <a href="{% url 'contact' %}" class="nav__link">
                <i class="bx bx-phone"></i>
                <span>Contact</span>
              </a>
            </li>
          </ul>
        </div>

        <!-- Theme Change Button -->
        <!-- <i class="bx bx-moon change-theme" id="theme-button"></i> -->

        <div>
          <a href="{% url 'register' %}" class="btn button nav__button">Sign Up</a>
          <a href="{% url 'login' %}" class="btn button__outlined nav__button">Log In</a>
        </div>
      </nav>
    </div>

    <!--==================== MAIN ====================-->
    <main class="main">
      <!--==================== SEARCH ====================-->
      <section class="search section">
        <div class="search__wrapper">
          <form action="{% url 'estate-search' %}" method="POST">
            {% csrf_token %}
            <input type="search" placeholder="Search By Location" required name="search" id="search-estate"/>
            <i class="bx bx-search"></i>
            <button type="submit">Search</button>
          </form>
        </div>
      </section>

      <!--==================== DESTINATION ====================-->
      <section class="destination section">
        <div class="destination__wrapper">
          <span class="section__subtitle"
            >Which City Do You Want To Book A Property?</span
          >
          <h2 class="section__title">Explore City <span>.</span></h2>

          <div class="destination__container">
            {% for city in city %}
            <a href="{% url 'property_detail' city.pk %}" class="destination__item">
              <div class="destination__img">
                <img src="{% if city.image %} {{ city.image.url }} {% else %} {% static 'asset_detail/img/city4.jpg' %} {% endif %}" alt="destination" />
              </div>
              <div class="destination__content">
                <h3 class="destination__title"> {{ city }}</h3>
                {% comment %} <p class="destination__description">70 Properties</p> {% endcomment %}
              </div>
            </a>
            {% endfor %}

          </div>
        </div>
      </section>
      <!--========== SCROLL UP ==========-->
      <a href="#" class="scrollup" id="scroll-up">
        <i class="bx bx-chevrons-up"></i>
      </a>
    </main>

    <!--=============== MAIN JS ===============-->
    <script src="{% static 'asset_detail/js/main.js' %}"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>

    <script>
      var availableTags = [];
      $.ajax({
		type: "GET",
		url: "{% url 'estate-listing' %}",
		success: function (response) {
            startAutocomplete(response);
		}
		});

	function startAutocomplete(availableTags)
	{
        $( "#search-estate" ).autocomplete({
          source: availableTags
        });
     }
  </script>
  </body>
</html>
