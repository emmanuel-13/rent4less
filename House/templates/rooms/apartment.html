{% extends 'Dashboard/base.html' %}
{% load crispy_forms_tags static bootstrap3 %}


{% block content %}
    <h2 class="card-header"><a href="#" style="text-decoration: none"> ADD Estate </a></h2>
    <form action="" method="post" class="mt-4" enctype="multipart/form-data">
        {% csrf_token %}
     <fieldset>
            {{ form.non_field_errors }}
            {% for field in form %}
            <div class="row">
                <div class="col-md-2">{% bootstrap_label field.label %}</div>
                <div class="col-md-6">{% bootstrap_field field show_label=False %}</div>
            </div>
            {% endfor %}
    </fieldset>

    <fieldset>
            <legend> Block </legend>
            {{ blocks.management_form }}
            {{ blocks.non_form_errors }}
                            {% for form in blocks %}
                    <div class="inline {{ blocks.prefix }} mt-2 mr-4 ml-4">
                    {% for field in form.visible_fields %}
                            <div class="row mt-3">
                                    <div class="col-md-2">{% bootstrap_label field.label %}</div>
                                    <div class="col-md-6">{% bootstrap_field field show_label=False %}</div>
                            </div>
                    {% endfor %}
                    </div>
            {% endfor %}
    </fieldset>
    <div class="row">
            <div class="col-md-3 mt-3">
                    <button type="submit" class="btn btn-success text-center form-control"> Save </button>
            </div>
    </div>
    </form>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.formset/1.2.1/jquery.formset.js"></script>

<script type="text/javascript">
    $('.inline.{{ blocks.prefix }}').formset({
        prefix: "{{ blocks.prefix }}",
        addCssClass: "btn btn-block btn-info bordered inline-form-add", 
        deleteText: 'remove',
        addText: 'add block',
        formCssClass: 'inline-form'
    });
</script>
{% endblock %}